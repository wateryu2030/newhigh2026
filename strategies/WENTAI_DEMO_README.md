# 闻泰科技（600745）量化交易案例测试

## 策略概述

这是一个针对**闻泰科技（600745）**的量化交易测试案例，展示了如何使用AKShare获取数据和RQAlpha进行策略回测。

### 策略特点

- **标的股票**: 闻泰科技（600745.XSHG）
- **策略类型**: 移动平均线策略（MA策略）
- **买入信号**: 5日均线上穿20日均线（金叉）
- **卖出信号**: 5日均线下穿20日均线（死叉）
- **风控**: 止损8%，止盈20%

## 数据验证

✅ **数据获取测试通过**
- 使用AKShare成功获取闻泰科技2024年数据
- 共242个交易日数据
- 数据已保存到: `data/wentai_600745_2024.csv`

## 使用方法

### 方法1：Web平台运行

1. **启动Web平台**:
   ```bash
   source venv/bin/activate
   python web_platform.py
   ```

2. **访问平台**: http://127.0.0.1:5050

3. **运行策略**:
   - 在"策略文件"下拉框中选择: `strategy_wentai_demo.py`
   - 设置回测日期: 2024-01-01 至 2024-12-31
   - 设置初始资金: 1000000（100万）
   - 点击"🚀 运行回测"

4. **查看结果**:
   - 在"回测日志"区域查看运行结果
   - 查看买入卖出信号和持仓情况

### 方法2：命令行运行

```bash
source venv/bin/activate
python run_backtest.py strategies/strategy_wentai_demo.py 2024-01-01 2024-12-31
```

## 策略逻辑详解

### 初始化阶段
- 设置标的股票为闻泰科技（600745.XSHG）
- 配置均线参数：短期5日，长期20日
- 设置止损止盈参数

### 交易逻辑
1. **每日计算均线**:
   - 计算5日移动平均线
   - 计算20日移动平均线

2. **买入条件**（金叉）:
   - 前一日：5日均线 ≤ 20日均线
   - 当日：5日均线 > 20日均线
   - 当前无持仓

3. **卖出条件**（死叉）:
   - 前一日：5日均线 ≥ 20日均线
   - 当日：5日均线 < 20日均线
   - 当前有持仓

4. **止损止盈**:
   - 亏损达到8%时自动止损
   - 盈利达到20%时自动止盈

## 预期结果

策略会在以下情况产生交易信号：
- **买入**: 当短期均线向上突破长期均线时
- **卖出**: 当短期均线向下突破长期均线时，或触发止损/止盈

## 数据文件

- `data/wentai_600745_2024.csv` - 闻泰科技2024年历史数据
- `data/wentai_stock_info.txt` - 闻泰科技基本信息

## 注意事项

1. **股票代码格式**: RQAlpha使用 `600745.XSHG` 格式（6位代码+交易所后缀）
2. **数据可用性**: 确保RQAlpha有足够的历史数据用于回测
3. **参数调整**: 可以根据回测结果调整均线周期、止损止盈比例
4. **实盘使用**: 本策略仅用于测试，实盘使用需要进一步验证和优化

## 扩展建议

1. **添加更多指标**: MACD、RSI、成交量等
2. **优化参数**: 使用参数优化工具寻找最佳均线周期
3. **组合策略**: 结合其他策略形成组合
4. **风险控制**: 添加更多风控规则，如最大回撤控制
